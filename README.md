**all-day-long** — это бронебойное, минималистичное ядро для создания нативных десктопных приложений с помощью Electron и React.

## Философия

Этот фреймворк был создан как ответ на излишне сложные, основанные на манифестах системы. Главный принцип — **прямая связь и нулевая магия**.

-   **Никаких манифестов:** Вы не описываете логику, вы вызываете ее. Чтобы выполнить серверную функцию, вы просто вызываете ее из React.
-   **Прозрачность:** Весь поток данных — это один асинхронный вызов функции. Никаких скрытых "движков".
-   **Строгое разделение:** Ядро (`core`) — это "тупой" фундамент. Приложение (`app`) — это место, где находится 100% вашей логики и UI.
-   **Контроль у вас:** Вы управляете поведением, внешним видом и API приложения через один простой конфигурационный файл. Ядро просто выполняет ваши инструкции.

## Как это работает?

Ядро предоставляет один-единственный, безопасный "мост" между вашим React-кодом и серверной частью Node.js.

1.  **Серверный API (`/packages/app/server/api`):** Вы создаете обычные `.js` файлы с `async` функциями. Ядро автоматически находит и регистрирует их.
2.  **Конфигурация (`/packages/app/longday.config.js`):** В этом файле вы описываете все: размер окна, название, иконки, пути к вашим файлам.
3.  **Мост (`window.longday.call()`):** В вашем React-коде вы вызываете любую серверную функцию по ее имени, например `await window.longday.call('users.getAll')`, и получаете результат.

## Быстрый старт

**Требования:** Node.js v16+.

Для создания нового проекта, выполните команду:

```bash
npx all-day-long-core my-new-app
```
*(Примечание: `all-day-long-core` — это имя вашего пакета в npm после публикации)*

Затем перейдите в папку проекта и запустите его:

```bash
cd my-new-app
npm install
npm run dev```

## Структура приложения

Вся ваша работа сосредоточена в `packages/app/`.

```
/packages/app/
├── assets/                 # Иконки для сборки
│   └── icon.png
├── public/                 # Скомпилированный React-бандл (bundle.js, bundle.css)
├── server/
│   └── api/                # ★ Ваши серверные функции (Node.js)
│       └── system.js
├── src/
│   ├── components/         # ★ Ваши React-компоненты
│   └── index.js
├── longday.config.js       # ★ Ваш главный файл конфигурации
└── package.json            # Зависимости и скрипты вашего приложения
```

## Разработка

#### Создание API

Просто создайте файл в `packages/app/server/api/`, например `database.js`:

```javascript
// packages/app/server/api/database.js
async function getUsers() {
  return [{ id: 1, name: 'Alice' }, { id: 2, name: 'Bob' }];
}
module.exports = { getUsers };
```

#### Вызов API из React

В любом React-компоненте вы можете вызвать эту функцию:

```jsx
import React, { useEffect, useState } from 'react';

function UserList() {
  const [users, setUsers] = useState([]);

  useEffect(() => {
    async function fetchUsers() {
      const userList = await window.longday.call('database.getUsers');
      setUsers(userList);
    }
    fetchUsers();
  }, []);

  return (
    <ul>
      {users.map(user => <li key={user.id}>{user.name}</li>)}
    </ul>
  );
}
```

## Сборка приложения

Для сборки вашего приложения в установочный файл (`.exe`, `.dmg` и т.д.), выполните команду из **корня проекта**:

```bash
npm run package
```

Готовые файлы появятся в папке `/dist` в корне проекта.

## Лицензия

MIT
